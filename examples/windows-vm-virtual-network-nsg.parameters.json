{
  "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "nsgName": {
      "value": "nsg"
    },
    "nsgRules": {
      "value": [
        {
          "securityRuleName": "Allow-OutBound-TCP-Internet-80-443",
          "description": "Allow outbound TCP traffic on ports 80 and 443",
          "sourceAddressPrefixes": ["VirtualNetwork"],
          "destinationAddressPrefixes": ["Internet"],
          "destinationPortRanges": ["80", "443"],
          "access": "Allow",
          "priority": 4095,
          "direction": "Outbound"
        },
        {
          "securityRuleName": "Deny-Outbound-Any-Any-Any",
          "description": "Deny all outbound traffic",
          "sourceAddressPrefixes": ["*"],
          "destinationAddressPrefixes": ["*"],
          "destinationPortRanges": ["80", "443"],
          "access": "Deny",
          "priority": 4096,
          "direction": "Outbound"
        },
        {
          "securityRuleName": "Deny-Inbound-Any-Any-Any",
          "description": "Deny all inbound traffic",
          "sourceAddressPrefixes": ["*"],
          "destinationAddressPrefixes": ["*"],
          "sourcePortRanges": ["*"],
          "destinationPortRanges": ["*"],
          "access": "Deny",
          "priority": 4096,
          "direction": "Inbound"
        }
      ]
    },
    "ddosProtectionPlanName": {
      "value": "ddosPlan"
    },
    "virtualNetworkName": {
      "value": "vnet"
    },
    "addressPrefixes": {
      "value": ["10.28.72.0/26"]
    },
    "subnets": {
      "value": [
        {
          "name": "subnet1",
          "addressPrefix": "10.28.72.0/27"
        },
        {
          "name": "subnet2",
          "addressPrefix": "10.28.72.32/27"
        }
      ]
    },
    "tags": {
      "value": {
        "purpose": "windows-vm-example"
      }
    }
  }
}
